{
  "version": 3,
  "sources": ["../../../synchronous-promise/index.js"],
  "sourcesContent": ["/* jshint node: true */\n\"use strict\";\n\nfunction makeArrayFrom(obj) {\n  return Array.prototype.slice.apply(obj);\n}\n\nvar\n  PENDING = \"pending\",\n  RESOLVED = \"resolved\",\n  REJECTED = \"rejected\";\n\nfunction SynchronousPromise(handler) {\n  this.status = PENDING;\n  this._continuations = [];\n  this._parent = null;\n  this._paused = false;\n  if (handler) {\n    handler.call(\n      this,\n      this._continueWith.bind(this),\n      this._failWith.bind(this)\n    );\n  }\n}\n\nfunction looksLikeAPromise(obj) {\n  return obj && typeof (obj.then) === \"function\";\n}\n\nfunction passThrough(value) {\n  return value;\n}\n\nSynchronousPromise.prototype = {\n  then: function (nextFn, catchFn) {\n    var next = SynchronousPromise.unresolved()._setParent(this);\n    if (this._isRejected()) {\n      if (this._paused) {\n        this._continuations.push({\n          promise: next,\n          nextFn: nextFn,\n          catchFn: catchFn\n        });\n        return next;\n      }\n      if (catchFn) {\n        try {\n          var catchResult = catchFn(this._error);\n          if (looksLikeAPromise(catchResult)) {\n            this._chainPromiseData(catchResult, next);\n            return next;\n          } else {\n            return SynchronousPromise.resolve(catchResult)._setParent(this);\n          }\n        } catch (e) {\n          return SynchronousPromise.reject(e)._setParent(this);\n        }\n      }\n      return SynchronousPromise.reject(this._error)._setParent(this);\n    }\n    this._continuations.push({\n      promise: next,\n      nextFn: nextFn,\n      catchFn: catchFn\n    });\n    this._runResolutions();\n    return next;\n  },\n  catch: function (handler) {\n    if (this._isResolved()) {\n      return SynchronousPromise.resolve(this._data)._setParent(this);\n    }\n    var next = SynchronousPromise.unresolved()._setParent(this);\n    this._continuations.push({\n      promise: next,\n      catchFn: handler\n    });\n    this._runRejections();\n    return next;\n  },\n  finally: function (callback) {\n    var ran = false;\n\n    function runFinally(result, err) {\n      if (!ran) {\n        ran = true;\n        if (!callback) {\n          callback = passThrough;\n        }\n        var callbackResult = callback(result);\n        if (looksLikeAPromise(callbackResult)) {\n          return callbackResult.then(function () {\n            if (err) {\n              throw err;\n            }\n            return result;\n          });\n        } else {\n          return result;\n        }\n      }\n    }\n\n    return this\n      .then(function (result) {\n        return runFinally(result);\n      })\n      .catch(function (err) {\n        return runFinally(null, err);\n      });\n  },\n  pause: function () {\n    this._paused = true;\n    return this;\n  },\n  resume: function () {\n    var firstPaused = this._findFirstPaused();\n    if (firstPaused) {\n      firstPaused._paused = false;\n      firstPaused._runResolutions();\n      firstPaused._runRejections();\n    }\n    return this;\n  },\n  _findAncestry: function () {\n    return this._continuations.reduce(function (acc, cur) {\n      if (cur.promise) {\n        var node = {\n          promise: cur.promise,\n          children: cur.promise._findAncestry()\n        };\n        acc.push(node);\n      }\n      return acc;\n    }, []);\n  },\n  _setParent: function (parent) {\n    if (this._parent) {\n      throw new Error(\"parent already set\");\n    }\n    this._parent = parent;\n    return this;\n  },\n  _continueWith: function (data) {\n    var firstPending = this._findFirstPending();\n    if (firstPending) {\n      firstPending._data = data;\n      firstPending._setResolved();\n    }\n  },\n  _findFirstPending: function () {\n    return this._findFirstAncestor(function (test) {\n      return test._isPending && test._isPending();\n    });\n  },\n  _findFirstPaused: function () {\n    return this._findFirstAncestor(function (test) {\n      return test._paused;\n    });\n  },\n  _findFirstAncestor: function (matching) {\n    var test = this;\n    var result;\n    while (test) {\n      if (matching(test)) {\n        result = test;\n      }\n      test = test._parent;\n    }\n    return result;\n  },\n  _failWith: function (error) {\n    var firstRejected = this._findFirstPending();\n    if (firstRejected) {\n      firstRejected._error = error;\n      firstRejected._setRejected();\n    }\n  },\n  _takeContinuations: function () {\n    return this._continuations.splice(0, this._continuations.length);\n  },\n  _runRejections: function () {\n    if (this._paused || !this._isRejected()) {\n      return;\n    }\n    var\n      error = this._error,\n      continuations = this._takeContinuations(),\n      self = this;\n    continuations.forEach(function (cont) {\n      if (cont.catchFn) {\n        try {\n          var catchResult = cont.catchFn(error);\n          self._handleUserFunctionResult(catchResult, cont.promise);\n        } catch (e) {\n          cont.promise.reject(e);\n        }\n      } else {\n        cont.promise.reject(error);\n      }\n    });\n  },\n  _runResolutions: function () {\n    if (this._paused || !this._isResolved() || this._isPending()) {\n      return;\n    }\n    var continuations = this._takeContinuations();\n    var data = this._data;\n    var self = this;\n    continuations.forEach(function (cont) {\n      if (cont.nextFn) {\n        try {\n          var result = cont.nextFn(data);\n          self._handleUserFunctionResult(result, cont.promise);\n        } catch (e) {\n          self._handleResolutionError(e, cont);\n        }\n      } else if (cont.promise) {\n        cont.promise.resolve(data);\n      }\n    });\n    if (looksLikeAPromise(this._data)) {\n      return this._handleWhenResolvedDataIsPromise(this._data);\n    }\n  },\n  _handleResolutionError: function (e, continuation) {\n    this._setRejected();\n    if (continuation.catchFn) {\n      try {\n        continuation.catchFn(e);\n        return;\n      } catch (e2) {\n        e = e2;\n      }\n    }\n    if (continuation.promise) {\n      continuation.promise.reject(e);\n    }\n  },\n  _handleWhenResolvedDataIsPromise: function (data) {\n    var self = this;\n    return data.then(function (result) {\n      self._data = result;\n      self._runResolutions();\n    }).catch(function (error) {\n      self._error = error;\n      self._setRejected();\n      self._runRejections();\n    });\n  },\n  _handleUserFunctionResult: function (data, nextSynchronousPromise) {\n    if (looksLikeAPromise(data)) {\n      this._chainPromiseData(data, nextSynchronousPromise);\n    } else {\n      nextSynchronousPromise.resolve(data);\n    }\n  },\n  _chainPromiseData: function (promiseData, nextSynchronousPromise) {\n    promiseData.then(function (newData) {\n      nextSynchronousPromise.resolve(newData);\n    }).catch(function (newError) {\n      nextSynchronousPromise.reject(newError);\n    });\n  },\n  _setResolved: function () {\n    this.status = RESOLVED;\n    if (!this._paused) {\n      this._runResolutions();\n    }\n  },\n  _setRejected: function () {\n    this.status = REJECTED;\n    if (!this._paused) {\n      this._runRejections();\n    }\n  },\n  _isPending: function () {\n    return this.status === PENDING;\n  },\n  _isResolved: function () {\n    return this.status === RESOLVED;\n  },\n  _isRejected: function () {\n    return this.status === REJECTED;\n  }\n};\n\nSynchronousPromise.resolve = function (result) {\n  return new SynchronousPromise(function (resolve, reject) {\n    if (looksLikeAPromise(result)) {\n      result.then(function (newResult) {\n        resolve(newResult);\n      }).catch(function (error) {\n        reject(error);\n      });\n    } else {\n      resolve(result);\n    }\n  });\n};\n\nSynchronousPromise.reject = function (result) {\n  return new SynchronousPromise(function (resolve, reject) {\n    reject(result);\n  });\n};\n\nSynchronousPromise.unresolved = function () {\n  return new SynchronousPromise(function (resolve, reject) {\n    this.resolve = resolve;\n    this.reject = reject;\n  });\n};\n\nSynchronousPromise.all = function () {\n  var args = makeArrayFrom(arguments);\n  if (Array.isArray(args[0])) {\n    args = args[0];\n  }\n  if (!args.length) {\n    return SynchronousPromise.resolve([]);\n  }\n  return new SynchronousPromise(function (resolve, reject) {\n    var\n      allData = [],\n      numResolved = 0,\n      doResolve = function () {\n        if (numResolved === args.length) {\n          resolve(allData);\n        }\n      },\n      rejected = false,\n      doReject = function (err) {\n        if (rejected) {\n          return;\n        }\n        rejected = true;\n        reject(err);\n      };\n    args.forEach(function (arg, idx) {\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\n        allData[idx] = thisResult;\n        numResolved += 1;\n        doResolve();\n      }).catch(function (err) {\n        doReject(err);\n      });\n    });\n  });\n};\n\nfunction createAggregateErrorFrom(errors) {\n  /* jshint ignore:start */\n  if (typeof window !== \"undefined\" && \"AggregateError\" in window) {\n    return new window.AggregateError(errors);\n  }\n  /* jshint ignore:end */\n\n  return { errors: errors };\n}\n\nSynchronousPromise.any = function () {\n  var args = makeArrayFrom(arguments);\n  if (Array.isArray(args[0])) {\n    args = args[0];\n  }\n  if (!args.length) {\n    return SynchronousPromise.reject(createAggregateErrorFrom([]));\n  }\n  return new SynchronousPromise(function (resolve, reject) {\n    var\n      allErrors = [],\n      numRejected = 0,\n      doReject = function () {\n        if (numRejected === args.length) {\n          reject(createAggregateErrorFrom(allErrors));\n        }\n      },\n      resolved = false,\n      doResolve = function (result) {\n        if (resolved) {\n          return;\n        }\n        resolved = true;\n        resolve(result);\n      };\n    args.forEach(function (arg, idx) {\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\n        doResolve(thisResult);\n      }).catch(function (err) {\n        allErrors[idx] = err;\n        numRejected += 1;\n        doReject();\n      });\n    });\n  });\n};\n\nSynchronousPromise.allSettled = function () {\n  var args = makeArrayFrom(arguments);\n  if (Array.isArray(args[0])) {\n    args = args[0];\n  }\n  if (!args.length) {\n    return SynchronousPromise.resolve([]);\n  }\n  return new SynchronousPromise(function (resolve) {\n    var\n      allData = [],\n      numSettled = 0,\n      doSettled = function () {\n        numSettled += 1;\n        if (numSettled === args.length) {\n          resolve(allData);\n        }\n      };\n    args.forEach(function (arg, idx) {\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\n        allData[idx] = {\n          status: \"fulfilled\",\n          value: thisResult\n        };\n        doSettled();\n      }).catch(function (err) {\n        allData[idx] = {\n          status: \"rejected\",\n          reason: err\n        };\n        doSettled();\n      });\n    });\n  });\n};\n\n/* jshint ignore:start */\nif (Promise === SynchronousPromise) {\n  throw new Error(\"Please use SynchronousPromise.installGlobally() to install globally\");\n}\nvar RealPromise = Promise;\nSynchronousPromise.installGlobally = function (__awaiter) {\n  if (Promise === SynchronousPromise) {\n    return __awaiter;\n  }\n  var result = patchAwaiterIfRequired(__awaiter);\n  Promise = SynchronousPromise;\n  return result;\n};\n\nSynchronousPromise.uninstallGlobally = function () {\n  if (Promise === SynchronousPromise) {\n    Promise = RealPromise;\n  }\n};\n\nfunction patchAwaiterIfRequired(__awaiter) {\n  if (typeof (__awaiter) === \"undefined\" || __awaiter.__patched) {\n    return __awaiter;\n  }\n  var originalAwaiter = __awaiter;\n  __awaiter = function () {\n    var Promise = RealPromise;\n    originalAwaiter.apply(this, makeArrayFrom(arguments));\n  };\n  __awaiter.__patched = true;\n  return __awaiter;\n}\n\n/* jshint ignore:end */\n\nmodule.exports = {\n  SynchronousPromise: SynchronousPromise\n};\n"],
  "mappings": "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",
  "names": ["Promise"]
}
